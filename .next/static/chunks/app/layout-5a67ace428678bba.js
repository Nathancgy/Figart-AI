(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},3171:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(5155),o=n(2115),i=n(6046);function s(e){let{children:t}=e,[n,s]=(0,o.useState)(null),a=(0,i.useRouter)();return(0,o.useEffect)(()=>{let e=e=>{var t;s({message:(null===(t=e.detail)||void 0===t?void 0:t.message)||"Your session has expired. Please log in again.",type:"error"}),setTimeout(()=>{s(null)},5e3)};return window.addEventListener("auth:sessionExpired",e),()=>{window.removeEventListener("auth:sessionExpired",e)}},[a]),(0,r.jsxs)(r.Fragment,{children:[t,n&&(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md animate-fade-in",children:(0,r.jsx)("div",{className:"rounded-lg shadow-lg p-4 ".concat("error"===n.type?"bg-red-600 text-white":"bg-amber-500 text-white"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:"error"===n.type?(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:n.message})}),(0,r.jsx)("div",{className:"ml-auto pl-3",children:(0,r.jsx)("button",{onClick:()=>s(null),className:"inline-flex text-white hover:text-gray-200 focus:outline-none","aria-label":"Close notification",title:"Close",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})})]})}},3674:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,8346,23)),Promise.resolve().then(n.t.bind(n,347,23)),Promise.resolve().then(n.bind(n,3171)),Promise.resolve().then(n.bind(n,9345)),Promise.resolve().then(n.bind(n,7146))},6046:(e,t,n)=>{"use strict";var r=n(6658);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},7146:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,AuthProvider:()=>a});var r=n(5155),o=n(2115),i=n(8547);let s=(0,o.createContext)(null);function a(e){let{children:t}=e,[n,a]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if((0,i.c4)()){let e=localStorage.getItem("username");e&&a(e)}},[]),(0,r.jsx)(s.Provider,{value:{username:n,setUsername:a,logout:()=>{(0,i.QF)(),localStorage.removeItem("username"),a(null)}},children:t})}function l(){let e=(0,o.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8134:(e,t,n)=>{"use strict";n.d(t,{H$:()=>o,ed:()=>i});var r=n(2818);let o=()=>{if(console.log("Environment variables:",{NEXT_PUBLIC_API_URL:r.env.NEXT_PUBLIC_API_URL}),r.env.NEXT_PUBLIC_API_URL)return console.log("Using API URL from environment variable:",r.env.NEXT_PUBLIC_API_URL),r.env.NEXT_PUBLIC_API_URL;{let{protocol:e,hostname:t}=window.location;if(console.log("Current hostname:",t),"localhost"===t||"127.0.0.1"===t){let n="".concat(e,"//").concat(t,":8000");return console.log("Using local API URL:",n),n}let n="".concat(e,"//").concat(t,":8000");return console.log("Using dynamic API URL based on hostname:",n),n}},i=e=>{let t="".concat(o(),"/photos/").concat(e);return console.log("Photo URL generated:",t),t}},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},8547:(e,t,n)=>{"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{AT:()=>h,c4:()=>l,iD:()=>d,QF:()=>c,$5:()=>u});var o=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in i){if(i[a])s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0])}return document.cookie=e+"="+t.write(o,e)+s}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),i=n(8134);let s="auth_token",a=e=>{o.set(s,e,{expires:7})},l=()=>o.get(s),c=()=>{o.remove(s)},d=async(e,t)=>{let n=await fetch("".concat((0,i.H$)(),"/users/login/"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",mode:"cors",body:JSON.stringify({username:e,password:t})}),r=await n.json().catch(()=>null);if(!n.ok){if(401===n.status)throw Error("Invalid username or password");throw Error((null==r?void 0:r.detail)||"Login failed")}if(!(null==r?void 0:r.token))throw Error("No token received");return a(r.token),r},u=async(e,t)=>{let n=await fetch("".concat((0,i.H$)(),"/users/register/"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",mode:"cors",body:JSON.stringify({username:e,password:t})}),r=await n.json().catch(()=>null);if(!n.ok){if(409===n.status)throw Error("Username already exists");throw Error((null==r?void 0:r.detail)||"Registration failed")}if(!(null==r?void 0:r.token))throw Error("No token received");return a(r.token),r},h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(),r={"Content-Type":"application/json",Accept:"application/json",...n&&{Authorization:"Bearer ".concat(n)},...t.headers},o=await fetch("".concat((0,i.H$)()).concat(e),{...t,headers:r,credentials:"include",mode:"cors"}),s=await o.json().catch(()=>null);if(!o.ok)throw Error((null==s?void 0:s.detail)||"API request failed");return s}},9345:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(5155),o=n(8173),i=n.n(o),s=n(2115),a=n(7146);function l(){let[e,t]=(0,s.useState)(!1),[n,o]=(0,s.useState)(!1),{username:l,logout:c}=(0,a.A)();(0,s.useEffect)(()=>{let e=()=>{let e=window.scrollY>10;e!==n&&o(e)};return document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}},[n]);let d=()=>{c(),t(!1)},u=()=>l?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-white",children:["Hello, ",l]}),(0,r.jsx)("button",{onClick:d,className:"text-white hover:text-indigo-300 transition-all duration-300",children:"Logout"})]}):(0,r.jsx)(i(),{href:"/login",className:"text-white bg-indigo-600 hover:bg-indigo-700 px-4 py-1.5 rounded-lg transition-all duration-300 transform hover:scale-105",children:"Login"});return(0,r.jsxs)("nav",{className:"fixed w-full top-0 z-20 transition-all duration-300 ".concat(n?"bg-black/40 backdrop-blur-md":"bg-transparent"),children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,r.jsx)(i(),{href:"/",className:"flex items-center space-x-2 relative z-10",children:(0,r.jsx)("span",{className:"font-bold text-xl text-white drop-shadow-md",children:"FigArt AI"})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,r.jsx)(i(),{href:"/",className:"text-white hover:text-indigo-300 transition-all duration-300 transform hover:scale-105",children:"Home"}),(0,r.jsx)(i(),{href:"/tutorial",className:"text-white hover:text-indigo-300 transition-all duration-300 transform hover:scale-105",children:"Tutorials"}),(0,r.jsx)(i(),{href:"/ai",className:"text-white hover:text-indigo-300 transition-all duration-300 transform hover:scale-105",children:"AI Analysis"}),(0,r.jsx)(i(),{href:"/community",className:"text-white hover:text-indigo-300 transition-all duration-300 transform hover:scale-105",children:"Community"}),(0,r.jsx)(u,{})]}),(0,r.jsx)("button",{className:"md:hidden focus:outline-none text-white",onClick:()=>t(!e),"aria-label":e?"Close menu":"Open menu",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]}),e&&(0,r.jsx)("div",{className:"md:hidden bg-black/80 backdrop-blur-lg w-full py-6 absolute top-full left-0 right-0 border-t border-white/10 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4 px-6",children:[(0,r.jsx)(i(),{href:"/",className:"text-white hover:text-indigo-300 transition-colors py-2 text-center",onClick:()=>t(!1),children:"Home"}),(0,r.jsx)(i(),{href:"/tutorial",className:"text-white hover:text-indigo-300 transition-colors py-2 text-center",onClick:()=>t(!1),children:"Tutorials"}),(0,r.jsx)(i(),{href:"/ai",className:"text-white hover:text-indigo-300 transition-colors py-2 text-center",onClick:()=>t(!1),children:"AI Analysis"}),(0,r.jsx)(i(),{href:"/community",className:"text-white hover:text-indigo-300 transition-colors py-2 text-center",onClick:()=>t(!1),children:"Community"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(u,{})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[838,441,587,358],()=>t(3674)),_N_E=e.O()}]);